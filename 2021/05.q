inp:read0`:2021/input/05.txt;
n:n where any each (=).' n:"J"$" "vs''"-"vs'ssr/[;(" -> ";",");("-";" ")]each inp;
p1:{s:any -1=signum r:last deltas a:(x;y);(cross/)reverse $[s;a[0]-;a[0]+]til each 1+abs r};
count where 2<=count each group raze p1 .' n